<app-header title="Prueba Nueva" [breadcrumbs]="items"></app-header>

<p-tabView>
    <p-tabPanel header="Automática">
        <!-- Subida Automática -->
        <form #uploadTestForm="ngForm">
            <div class="flex gap-2 mb-6">
                <h5 class="text-[21px] font-normal text-[#26201F] tracking-tight">Edición </h5>
                <p-inputNumber [(ngModel)]="test.edition"
                            name="edition"
                            [format]="false"
                            [showButtons]="true"
                            [min]="minEdition"
                            [max]="maxEdition">
                </p-inputNumber>    
                <h5 class="text-[21px] font-normal text-[#26201F] tracking-tight ml-5">Año Escolar </h5>
                <p-dropdown [(ngModel)]="test.levels" 
                            name="level" 
                            class="col-span-2 my-auto mr-8" 
                            [options]="levels"  
                            optionLabel="name" 
                            optionValue="code">
                </p-dropdown>
            </div>
            <p-fileUpload
                #uploadBtn
                mode="basic"
                chooseLabel="Subir archivo"
                name="testFile"
                [url]="uploadUrl"
                accept=".zip, .rar"
                [maxFileSize]="500000"
                (onUpload)="onUpload($event)">
            </p-fileUpload>
            <button pButton 
                    type="button" 
                    class="float-right"
                    label="Siguiente" 
                    icon="pi pi-arrow-right" 
                    iconPos="right" 
                    [disabled]="addTestForm.form.invalid"
                    (click)="uploadTest()">
            </button>
        </form>
    </p-tabPanel>
    
    <p-tabPanel header="Manual">
        <!-- Subida Manual -->
        <form #addTestForm="ngForm">
            <div class="flex gap-2 mb-6">
                <h5 class="text-[21px] font-normal text-[#26201F] tracking-tight">Edición </h5>
                <p-inputNumber [(ngModel)]="test.edition" name="edition" [showButtons]="true" [min]="minEdition" [max]="maxEdition" [format]="false"></p-inputNumber>    
                <h5 class="text-[21px] font-normal text-[#26201F] tracking-tight ml-5">Año Escolar </h5>
                <p-dropdown [(ngModel)]="test.levels" 
                            name="level" 
                            class="col-span-2 my-auto mr-8" 
                            [options]="levels"  
                            optionLabel="name" 
                            optionValue="code">
                </p-dropdown>
            </div>
            <button pButton 
                    type="button" 
                    class="float-right"
                    label="Siguiente" 
                    icon="pi pi-arrow-right" 
                    iconPos="right" 
                    [disabled]="addTestForm.form.invalid"
                    (click)="addManualTest()">
            </button>
        </form>
    </p-tabPanel>
</p-tabView>

<p-toast position="bottom-center"></p-toast>