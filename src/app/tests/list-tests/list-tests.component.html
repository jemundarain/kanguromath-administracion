<app-header title="Pruebas" [breadcrumbs]="items"></app-header>

<!-- Edición combobox -->
<div class="flex gap-2 mb-6">
    <h5 class="text-[21px] font-normal text-[#26201F] tracking-tight">Edición:</h5>
    <form #editionsForm="ngForm">
        <p-dropdown class="col-span-2 my-auto" [options]="editions" [(ngModel)]="edition" name="edition"></p-dropdown>
    </form>
</div>


<!-- Table -->
<app-progress-spinner [condition]="!tests" [template]="tableT"></app-progress-spinner>
<ng-template #tableT>
    <div class="grid grid-cols-12 mb-6">
        <p-table *ngIf="tests" [value]="tests" class="col-span-6" id="tests-table">
            <ng-template pTemplate="header">
                <tr>
                    <th>Año</th>
                    <th>Estado</th>
                    <th>Ver</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-test>
                <tr>
                    <td>{{test.levels | levelsTittle }}</td>
                    <td><i *ngIf="test.state" class="pi pi-check" pTooltip="Publicada" tooltipPosition="top"></i><i *ngIf="!test.state" class="pi pi-clock text-300" pTooltip="Pendiente" tooltipPosition="top"></i></td>
                    <td><a [routerLink]="['/pruebas/ver', test.test_id ]"><i class="pi pi-eye"></i></a></td>
                    <ng-container *ngIf="app_enabled; else editTest">
                        <td><a (click)="appDisabledAlert()"><i class="pi pi-file-edit disabled"></i></a></td>
                        <td><a (click)="appDisabledAlert()"><i class="pi pi-trash disabled"></i></a></td>
                    </ng-container>
                    <ng-template #editTest>
                        <td><a [routerLink]="['/pruebas/editar', test.test_id ]"><i class="pi pi-file-edit"></i></a></td>
                        <td><a (click)="deleteTest(test)"><i class="pi pi-trash"></i></a></td>
                    </ng-template>
                </tr>
            </ng-template>
        </p-table>
    </div>
</ng-template>

<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
<p-toast position="bottom-center"></p-toast>